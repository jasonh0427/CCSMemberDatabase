#pragma checksum "D:\Cambridge\CCS\MemberDatabase\Views\Home\Manage.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "3ec07191f98efa2d3842f0395a944b30cde3adfc"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Home_Manage), @"mvc.1.0.view", @"/Views/Home/Manage.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Home/Manage.cshtml", typeof(AspNetCore.Views_Home_Manage))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "D:\Cambridge\CCS\MemberDatabase\Views\_ViewImports.cshtml"
using MemberDatabase;

#line default
#line hidden
#line 2 "D:\Cambridge\CCS\MemberDatabase\Views\_ViewImports.cshtml"
using MemberDatabase.Models;

#line default
#line hidden
#line 1 "D:\Cambridge\CCS\MemberDatabase\Views\Home\Manage.cshtml"
using MemberDatabase.Data;

#line default
#line hidden
#line 2 "D:\Cambridge\CCS\MemberDatabase\Views\Home\Manage.cshtml"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"3ec07191f98efa2d3842f0395a944b30cde3adfc", @"/Views/Home/Manage.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"b7ccda0b74fbaea60719f91a12a0985b178ef052", @"/Views/_ViewImports.cshtml")]
    public class Views_Home_Manage : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(66, 2, true);
            WriteLiteral("\r\n");
            EndContext();
            BeginContext(170, 6, true);
            WriteLiteral("\r\n\r\n\r\n");
            EndContext();
#line 9 "D:\Cambridge\CCS\MemberDatabase\Views\Home\Manage.cshtml"
 if(ViewBag.Privilege != 2){

#line default
#line hidden
            BeginContext(206, 63, true);
            WriteLiteral("    <h2>Sorry, you are not authorized to view this page.</h2>\r\n");
            EndContext();
#line 11 "D:\Cambridge\CCS\MemberDatabase\Views\Home\Manage.cshtml"
    return;
}

#line default
#line hidden
            BeginContext(285, 514, true);
            WriteLiteral(@"
<button type = 'button' onclick = 'getUser()' class = 'btn btn-primary btn-sm'>Display all users</button>

<div>
    <h3 id=""Name""></h3>
    <h3 id=""Privilege""></h3>
    <h3 id=""College""></h3>
    <h3 id=""Subject""></h3>
    <h3 id=""Year of admission""></h3>
    <h3 id=""Spouse""></h3>
</div>

<table class=""table"">
    <thead>
        <th>User Name</th>
        <th>Married</th>
        <th>Has Parents</th>
        <th>Actions</th>
    </thead>
    <tbody id=""results""></tbody>
</table>



");
            EndContext();
            DefineSection("Scripts", async() => {
                BeginContext(817, 176, true);
                WriteLiteral("\r\n    <script>\r\n        function getUser()\r\n        {\r\n            $.ajax({\r\n                method: \"POST\",\r\n                data:{\r\n                },\r\n                url: \'");
                EndContext();
                BeginContext(994, 27, false);
#line 45 "D:\Cambridge\CCS\MemberDatabase\Views\Home\Manage.cshtml"
                 Write(Url.Action("GetAll","Home"));

#line default
#line hidden
                EndContext();
                BeginContext(1021, 2975, true);
                WriteLiteral(@"',
                success: function(ret) { //this time the whole list of users is returned
                    var container = document.getElementById('results');
                    container.innerHTML = """"; //innerHTML accesses content
                    for (var i=0; i<ret.length;i++){ //毕竟后端en返回回来的是个collection
                        var row = document.createElement('tr');
                        var userNameCol = document.createElement('td');
                        userNameCol.innerHTML = ret[i].userName;
                        row.appendChild(userNameCol);


                        var marriedCol = document.createElement('td');
                        if(ret[i].spouse != null)
                        {
                            marriedCol.innerHTML = ""Yes"";
                        }
                        else
                        {
                            marriedCol.innerHTML = ""No"";
                        }
                        row.appendChild(marriedCol);

    ");
                WriteLiteral(@"                    var hasParentsCol = document.createElement('td');
                        if(ret[i].parent1 != null) {
                            hasParentsCol.innerHTML = ""Yes"";
                        }
                        else{
                            hasParentsCol.innerHTML = ""No"";
                        }
                        row.appendChild(hasParentsCol);

                        var actionCol = document.createElement('td');
                        actionCol.innerHTML = 
                            ""<button type='button' onclick='select(\"""" + ret[i].id + ""\"",1""
                            + "")' class='btn btn-primary btn-sm'>Confirm Member Status</button>""
                            + ""<span>&nbsp;&nbsp;</span>""
                            + ""<button type='button' onclick='select(\"""" + ret[i].id + ""\"",2""
                            + "")' class='btn btn-primary btn-sm'>Confirm Committee Status</button>""
                            + ""&nbsp; &nbsp""
                     ");
                WriteLiteral(@"       + ""<button type='button' onclick='select(\"""" + ret[i].id + ""\"",3""
                            + "")' class='btn btn-primary btn-sm'>Clear all relationships</button>""
                            + ""<span>&nbsp;&nbsp;</span>""
                            + ""<button type='button' onclick='profile(\"""" + ret[i].id +""\""""
                            + "")' class='btn btn-primary btn-sm'>Basic Information</button>"" 
                        row.appendChild(actionCol);
                        container.appendChild(row);
                    }                    // 1--confirm  2--clear all
                },
                error: function() {
                    alert(""some error occurred"");
                }
            });
        }

//let's think about functionalities
//clear all relationships; confirm member status; 

        function select(user, type){
            $.ajax({
                url: '");
                EndContext();
                BeginContext(3997, 32, false);
#line 104 "D:\Cambridge\CCS\MemberDatabase\Views\Home\Manage.cshtml"
                 Write(Url.Action("ManageUser", "Home"));

#line default
#line hidden
                EndContext();
                BeginContext(4029, 503, true);
                WriteLiteral(@"', //我在后端还没定义这个函数，等会再实现
                data: {
                    userId: user,
                    type: type
                },
                method: ""POST"",
                success: function(ret){
                    alert(ret);
                },
                error: function(){
                    alert(""Some error occurred, please try again later."");
                }
            })
        }

        function profile(user){
            $.ajax({

                url: '");
                EndContext();
                BeginContext(4533, 33, false);
#line 122 "D:\Cambridge\CCS\MemberDatabase\Views\Home\Manage.cshtml"
                 Write(Url.Action("GetUserInfo", "Home"));

#line default
#line hidden
                EndContext();
                BeginContext(4566, 861, true);
                WriteLiteral(@"',
                data: {
                    id: user,
                },
                method: ""POST"",
                success: function(ret){
                    document.getElementById('Name').innerHTML = ret.name;
                    document.getElementById('Privilege').innerHTML = ret.privilege;
                    document.getElementById('Subject').innerHTML = ret.subject;
                    document.getElementById('College').innerHTML = ret.college;
                    document.getElementById('Year of admission').innerHTML = ret.yoa;
                    document.getElementById('Spouse').innerHTML = ""Married to "" + ret.spouse;
                },
                error: function(){
                    alert(""Some error occurred, please try again later."");
                }
            })
        }

    </script>




");
                EndContext();
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public UserManager<MemberUserInfo> UserManager { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public SignInManager<MemberUserInfo> SignInManager { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
